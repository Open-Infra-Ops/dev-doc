# 会议小程序接口文档

## 一.用户模块

### 1.用户登录

请求地址：/login/

请求方法：post请求

请求参数：

~~~json
{
    "code": "xxxxxxxxxxxxxxxx"   # string, 微信授权后响应的code, 限制长度128
}
~~~

返回参数：

~~~json
{
    "user_id": 1,                 # int, 用户的id
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODEwMzQ2LCJqdGkiOiJkNzkwZGU4NjJlOTE0YzFjOGI4YTVhYWZiYjc2MzA5YyIsInVzZXJfaWQiOjF9.JhVJUwIoAnFGeINTmHPze2mV3FkfdcxoG0ys-lz8miz",    # string, 用户登录后的token
    "refresh_token":  "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODEwMzQ2LCJqdGkiOiJkNzkwZGU4NjJlOTE0YzFjOGI4YTVhYWZiYjc2MzA5YyIsInVzZXJfaWQiOjF9.JhVJUwIoAnFGeINTmHPze2mV3FkfdcxoG0ys-lz8miz",   # string，用户的刷新token
    "level": 3,					  # int, 会议活动权限,(1, "普通用户"), (2, "会议预定者"), (3, "管理员")
    "activity_level": 3,          # int, 活动会议权限,(1, "普通用户"), (2, "活动发布者"), (3, "管理员")
    "gitee_name": null,           # string, 码云的gitee_id
    "nickname": "USER_64e02c77",  # string, 微信名称
    "avatar": "https://www.bai",  # string, 头像链接   
    "agree_privacy_policy": true  # bool, 是否赞成隐私声明
}
~~~

### 2.用户刷新token

请求地址：/refresh/

请求方法：post请求

请求参数：

+ json请求体

  ~~~json
  {
      "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODEwMzQ2LCJqdGkiOiJkNzkwZGU4NjJlOTE0YzFjOGI4YTVhYWZiYjc2MzA5YyIsInVzZXJfaWQiOjF9.JhVJUwIoAnFGeINTmHPze2mV3FkfdcxoG0ys-lz8miz", 
  }
  ~~~

返回参数：

~~~bash
{
"access":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODEwMzQ2LCJqdGkiOiJkNzkwZGU4NjJlOTE0YzFjOGI4YTVhYWZiYjc2MzA5YyIsInVzZXJfaWQiOjF9.JhVJUwIoAnFGeINTmHPze2mV3FkfdcxoG0ys-lz8miz",    # string, 用户登录后的token
"refresh_token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODEwMzQ2LCJqdGkiOiJkNzkwZGU4NjJlOTE0YzFjOGI4YTVhYWZiYjc2MzA5YyIsInVzZXJfaWQiOjF9.JhVJUwIoAnFGeINTmHPze2mV3FkfdcxoG0ys-lz8miz", 
}
~~~

### 3.用户登出

请求地址：/logout/

请求方法：post请求

请求参数：无

返回参数：

```json
{
    "code": 200,
    "msg": "User logged out",
    "data": None
}
```

### 4.用户注销

请求地址：/logoff/

请求方法：post请求

请求参数：无

返回参数：

~~~json
{
    "code": 200,
    "msg": "User logged off",
    "data": None
}
~~~

### 5.同意更新隐私声明

请求地址：/agree/

请求方法：put请求

请求参数：无

返回参数：

~~~json
{
    "code": 200,
    "msg": "Agree to privacy statement",
    "data": None
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIwNTQwLCJqdGkiOiI1ZjJkNWY2NGY0YWM0ZTYyYTc5ZGZhNGYxNTNiMGQxZSIsInVzZXJfaWQiOjF9.tGlTPm0_q8Ea2GqCihjH_CFXkm5tGXYit9qGw1iVflY1"
}
~~~

### 6.撤销同意更新隐私政策

请求地址： /revoke/

请求方法：post请求

请求参数：无

返回参数：

~~~json
{
    "code": 200,
    "msg": "Revoke agreement of privacy policy",
    "data": None
}
~~~

### 7.查询所有sig组的名称

请求地址：/groups/?search=group_name

请求方法：get请求

请求参数：

~~~bash
search: 模糊查询sig组的名称
~~~

返回参数：

~~~json
[
    	{
			"id": 1,   # int类型， group的id 
	  		"group_name": "A-Tune"  # string类型， group的name
		},
		{
			"id": 110,
			"group_name": "ai"
		}
 ]
~~~

### 8.查询所有sig组的详细信息（已删除）

请求地址：/sigs/

请求方法：get请求

请求参数：无

返回参数：

~~~json
[
    {
        "id": 1,
        "group_name": "A-Tune",
        "home_page": "https://gitee.com/openeuler/community/tree/master/sig/A-Tune",
        "maillist": "a-tune@openeuler.org",
        "irc": "#openeuler-dev",
        "owners": ""
    },
]
~~~

### 9.查询单个sig组的详细信息(已删除)

请求地址：/groups/<int:pk>/ 

请求方法：get请求

请求参数：

+ 路径参数

  ~~~json
  pk: int, sig组的id, 路径参数
  ~~~

返回参数: 

~~~json
{
    "id": 1,
    "group_name": "A-Tune",
    "home_page": "https://gitee.com/openeuler/tree/master/sig/A-Tune",
    "maillist": "a-tune@xx.org",
    "irc": "#openeuler-dev",
    "etherpad": "https://etherpad.xxx.org/px/xxx",
    "owners": "",
    "app_home_page": null,
    "description": "The A-Tune team is responsible for exploration of optimization technologies and AI-assisted performance analysis"
}
~~~

### 10.查询不在该sig组的用户（分页查询）

请求地址： /users_exclude/<int:pk>/?page=1&size=10&search=nickname

请求方法：get请求

请求参数:

+ 路径参数

  ~~~json
  pk:   int类型, sig组的id
  ~~~

+ 查询参数

  ~~~json
  page: int类型，第几页，
  size: int类型，每页的大小
  search: 模糊查询，查询nickname
  ~~~

返回参数:

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
				"id": 1,   # int,用户的id 
		  		"nickname": "USER_ac94a464",  # string， 微信获取的头像 
		  		"gitee_name": null,   # string, 码云的gitee_id 
		  		"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321" # 头像
			},
			{
				"id": 2,
				"nickname": "USER_b1fc968b",
				"gitee_name": "haml",
				"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321"
			},
			{
				"id": 3,
				"nickname": "USER_b62429ac",
				"gitee_name": null,
				"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321"
			}
	]
}
~~~

### 11.查询在该sig组的用户（分页查询）

请求地址：/users_include/<int:pk>/?page=1&size=10&search=nickname

请求方法：get请求

请求参数:

+ 路径参数

  ~~~json
  pk:   int类型, sig组的id, 路径参数
  ~~~

+ 查询参数：

  ~~~json
  page: int类型，第几页，
  size: int类型，每页的大小
  search: nickname
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
				"id": 1,
				"nickname": "USER_ac94a464",
				"gitee_name": null,
				"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321"
			},
			{
				"id": 2,
				"nickname": "USER_b1fc968b",
				"gitee_name": "haml",
				"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321"
			},
			{
				"id": 3,
				"nickname": "USER_b62429ac",
				"gitee_name": null,
				"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321"
			}]
}
~~~

### 12.sig组批量新增用户

请求地址：/groupuser/action/new/

请求方法：post请求

请求参数：

+ 请求体： json格式

  ~~~json
  {
      "ids": "1-2-3-4"       # string类型，待添加用户的id使用"-"拼接而成，获取id列表([1,2,3,4...])的长度为50  
      "group_id"： 1         # int类型，sig组的id, 
  }
  ~~~

返回参数:

~~~json
{
    "code": 200,
    "msg": "Success to add maintainers to the group",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIxOTM2LCJqdGkiOiJkZTVlNWUzYzk1ZjA0MjI0YjUxM2MxYTM2NzBmOGI0MCIsInVzZXJfaWQiOjF9.ZLxyqs2B0eOpGkKM2IJPPD9r7SuzLJeZHK2cEtiuXU41"
}
~~~

### 13.sig组批量删除用户

请求地址：/groupuser/action/del/

请求方法：post请求

请求参数：

+ 请求体：json格式

  ~~~json
  {
      "ids": "1-2-3-4"       # string类型，待删除的用户的id使用"-"拼接而成，获取id列表([1,2,3,4...])的长度为50  
      "group_id"： 1         # int类型，sig组的id, 
  }
  ~~~

返回参数:

~~~json
{
    "code": 200,
    "msg": "successfully deleted",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIxODc1LCJqdGkiOiIwYmVhNzBmZjdmNDc0NzIyOGE5OGFlNzE3YzBhNmFhMiIsInVzZXJfaWQiOjF9.CM9CG3Gzkqi84Jn3v8-P8z9UdTXIjHwUKc85CNxdMO41"
}
~~~

### 14.用户的详情信息

请求地址：/userinfo/<int:pk>/

请求方法：get请求

请求参数：

+ 路径参数

  ~~~json
  pk: # int类型，用户id
  ~~~

返回参数：

~~~json
{
    "code": 200,
    "msg": "success",
    "data": None
}
~~~

### 15.活动发起人（分页查询）

请求地址：/sponsors/?page=1&size=10&search=nickname

请求方法：get请求

请求参数：无

+ 查询参数

  ~~~jsono
  page: int类型，第几页
  size: int类型，每页的大小
  search: nickname，模糊查询
  ~~~

返回参数：

```json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
			"id": 2,
			"nickname": "USER_b1fc968b",
			"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321",
			"gitee_name": "haml"
		},
		{
			"id": 3,
			"nickname": "USER_b62429ac",
			"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1321",
			"gitee_name": null
		}
	]
}
```

### 16.非活动发起人(分页查询)

请求地址：/nonsponsors/?page=1&size=10&search=nickname

请求方法：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  search: 模糊查询，nickname
  ~~~

返回参数：

```json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
			"id": 2,
			"nickname": "USER_b1fc968b",
			"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1132",
			"gitee_name": "haml"
		},
		{
			"id": 3,
			"nickname": "USER_b62429ac",
			"avatar": "https://thirdwx.qlogo.cn/mmopen/vi_32/1132",
			"gitee_name": null
		}
	]
}
```

### 17.批量添加活动发起人

请求地址：/sponsor/action/new/

请求方法：post请求

请求参数：

+ 请求体： json格式

  ~~~json
  {
      "ids": "1-2-3-4"       # string类型，待添加用户的id使用"-"拼接而成，获取id列表([1,2,3,4...])的长度为50  
  }
  ~~~

返回参数:

```json
{
    "code": 200,
    "msg": "Added successfully",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIzMjQ4LCJqdGkiOiIyNTE0MmU1ZWZhZmM0NTE3Yjg2NDkzOTk2NzdhMmM3NSIsInVzZXJfaWQiOjF9.uFEci2OZBK5-6hSfBjaOMkYsWNQ66YvOXjPvoOtoVZI"
}
```

### 18.批量删除活动发起人

请求地址：/sponsor/action/del/

请求方法：post请求

请求参数：

+ 请求体： json格式

  ~~~json
  {
      "ids": "1-2-3-4"       # string类型，待删除用户的id使用"-"拼接而成，获取id列表([1,2,3,4...])的长度为50  
  }
  ~~~

返回参数:

```json
{
    "code": 204,
    "msg": "successfully deleted",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIyODQ5LCJqdGkiOiIzYTFjN2Q3ODgwMjA0MzBjYjYwZjRlNTk0MWM2NDkzNiIsInVzZXJfaWQiOjF9.LUr6-dG6MXsURvI6QS8soFO3j258YRrjiIjDtd8AW-w"
}
```

### 19.修改活动发起人的gitee_name（删除）

请求地址：/sponsorinfo/<int:pk>/

请求方法：put请求

请求参数：

+ 路径参数

  ~~~json
  pk: 路径参数，int类型，发起人的名称
  ~~~

+ 请求体：json格式

  ~~~json
  {
      "gitee_name": "xxx"
  }
  ~~~

返回参数：

~~~json
{
    "id": 3,
    "gitee_name": "xxx",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIzMzkxLCJqdGkiOiIxMDk4NTU2NDU5MGQ0ZmUwYjczZDFjYmEzYTY2MzU5NCIsInVzZXJfaWQiOjF9.G1qKUu5qwFSA2H6iQwFbU1jrUvBVO-hmUOmxjXwACao"
}
~~~

### 20.修改用户的gitee_name

请求地址：/user/<int:pk>/

请求方法：put请求

请求参数：

- 路径参数：

  ```json
  pk: # int类型 用户的id
  ```

- 请求体: json格式

  ```json
  {
      "gitee_name"： "xxxxx"
  }
  ```

返回参数：

```json
{
    "id": 3,
    "gitee_name": "xxx",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODIzMzkxLCJqdGkiOiIxMDk4NTU2NDU5MGQ0ZmUwYjczZDFjYmEzYTY2MzU5NCIsInVzZXJfaWQiOjF9.G1qKUu5qwFSA2H6iQwFbU1jrUvBVO-hmUOmxjXwACao"
}
```

### 21.查看用户所在组的信息

请求地址：/usergroup/<int:pk>/

请求方法：get请求

请求参数：

- 路径参数

  ```json
  pk: int类型，用户的id
  ```

返回参数：

```json
{
    "group":"xxx", 
    "group_name":"xxxx", 
    "etherpad":"etherpad", 
    "maillist:"https://baidu.com"
}
```

### 22.查看我的各类计数

请求地址：/mycounts/

请求方法：get请求

请求参数：无

返回参数：

```json
{
    "collected_meetings_count":"xxx", 
    "collected_activities_count":"xxxx", 
    "created_meetings_count":"xxxx", 
    "published_activities_count:"xxxx",
    "drafts_count:"xxxx",
    "publishing_activities_count:"xxxx",
}
```



## 二.会议模块

### 1.创建会议

请求地址：/meetings/

请求方法：post请求

请求参数：

+ 请求体: json格式

  ~~~json
  {
      "topic": "xxx",         # string类型，会议名称，必填，长度限制128，限制内容中含有http，\r\n, xss攻击标签
      "platform": "zoom",     # string类型，平台，只能是以下参数: zoom,welink,tencent， 必填
      "sponsor": "Tom_zc",    # string类型，会议发起人，必填，长度限制20，限制内容中含有http，\r\n, xss攻击标签
      
      "group_name": "A-Tune", # string类型，sig 组名称，必填， 限制40
      "group_id": 1,          # int类型，sig组id, 必填
      "date": "2023-11-02",   # string类型，时间：2023-10-29，必填
      "start": "08:00",       # string类型，开始时间，必填
      "end": "09:00",         # string类型，结束时间，必填
      "etherpad": "https://etherpad.openeuler.org/p/A-Tune-meetings",# string类型，以 https://etherpad.openeuler.org开头，必填，限制64
      "agenda": "会议 内容",   # string类型，开会内容，必填，内容可以为空， 限制为4096，限制内容中含有http，\r\n, xss攻击标签
      "emaillist": "tom_toworld@163.com;353712216@qq.com;", # string类型, 发送邮件，以;拼接，长度最长为1000+20个;最长1020个字符，每封邮箱长度最长为50，限制20封，必填，内容可以为空
      "record": "cloud"， # string类型，是否自动录制，必填，可为空字符串，空字符串代表非自动录制，必填，内容可以为空
  }
  ~~~

返回参数：

~~~json
{
    "code": 200,
    "message": "Created successfully",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4ODI3NzI2LCJqdGkiOiJiMDVmZWY5ZmMxNzA0YjUyOTJiOGNiMDAzZDBlNGExNSIsInVzZXJfaWQiOjR9.P7pyiQjT7wgWVYvIFdLz4g7VqWCvTxHe0NgU_KE3QGw",
    "id": 4
}
~~~

### 2.查询前后一周的会议（分页查询）

请求地址：/meetings_weekly/?page=1&size=10&group_name=A-OPS&search=topicA

请求方法：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  group_name： 精确过滤组名
  search:   可以查询topic
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 2,
		"collection_id": null,
		"user_id": 4,
		"group_id": 1,
		"topic": "xxx",
		"sponsor": "Tom_zc",
		"group_name": "A-Tune",
		"date": "2023-11-02",
		"start": "08:00",
		"end": "09:00",
		"agenda": "会议 内容",
		"etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
		"mid": "85968252959",
		"join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
		"video_url": "",
		"mplatform": "zoom"
	}]
}
~~~



### 3.查询前后一周的会议的组的信息

请求地址：/meetings_group/

请求方法：get请求

请求参数：无

返回参数：

```json
[{
		"id": 2,
		"group_name": "Tom"
}]
```

### 4.查询今天的所有会议(分页查询)

请求地址：/meetings_daily/?page=10&size=10

请求方法：get请求

请求参数： 

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 2,
		"collection_id": null,
		"user_id": 4,
		"group_id": 1,
		"topic": "xxx",
		"sponsor": "Tom_zc",
		"group_name": "A-Tune",
		"date": "2023-11-02",
		"start": "08:00",
		"end": "09:00",
		"agenda": "会议 内容",
		"etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
		"mid": "85968252959",
		"join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
		"video_url": "",
		"mplatform": "zoom"
	}]
}
~~~

### 5.查看最近的会议(分页查询)

请求地址：/meetings_recently/?page=1&size=10

请求方法：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 2,
		"collection_id": null,
		"user_id": 4,
		"group_id": 1,
		"topic": "xxx",
		"sponsor": "Tom_zc",
		"group_name": "A-Tune",
		"date": "2023-11-02",
		"start": "08:00",
		"end": "09:00",
		"agenda": "会议 内容",
		"etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
		"mid": "85968252959",
		"join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
		"video_url": "",
		"mplatform": "zoom"
	}]
}
~~~

### 6.删除单个会议

请求地址：/meeting/<int:mid>/

请求方法：delete请求

请求参数：

+ 路径参数

  ~~~json
  mid: # int类型，会议的mid，eg:85968252959
  ~~~

返回参数：

~~~bash
{
	"code": 200,
	"message": "Delete successfully.",
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA2NjE5LCJqdGkiOiI0ZjVmOWE2NjI5ZWM0ODUzYTE2OTlmM2FmYmQ3N2U1MCIsInVzZXJfaWQiOjR9.8C1VfV2Ica9PO4dOS3LzKVpnwo7P_xygnTGTBopmyWw"
}
~~~

### 7.查询单个会议

请求地址：/meetings/<int:pk>/

请求方法：get请求

请求参数：

+ 路径参数

  ~~~json
  pk: # int类型, meeting的id
  ~~~

返回参数：

~~~json
{
    "id": 1, 
    "collection_id": 1, 
    "user_id": 1, 
    "group_id": 1, 
    "topic": "topic", 
    "sponsor": "tom", 
    "group_name"： "xxxx", 
    "date": "2023-10-27", 
    "start":"4",         
    "end":"5", 
    "agenda": "xxxx", 
    "etherpad": "xxxx", 
    "mid": "xxxxx", 
    "join_url": "https://baidu.com", 
    "video_url": "https://baidu.com", 		 
    "mplatform": "zoone"
}
~~~



### 8.查看我所创建的会议（分页查询）

请求地址：/mymeetings/?page=1&size=10

请求方法：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 2,
		"collection_id": null,
		"user_id": 4,
		"group_id": 1,
		"topic": "xxx",
		"sponsor": "Tom_zc",
		"group_name": "A-Tune",
		"date": "2023-11-02",
		"start": "08:00",
		"end": "09:00",
		"agenda": "会议 内容",
		"etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
		"mid": "85968252959",
		"join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
		"video_url": "",
		"mplatform": "zoom"
	}]
}
~~~

### 9.查看所有会议（机机）(分页查询)

请求路径：/allmeetings/?page=1&size=10

请求方法：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [
    {
        "id": 2,
        "collection_id": null,
        "user_id": 4,
        "group_id": 1,
        "topic": "xxx",
        "sponsor": "Tom_zc",
        "group_name": "A-Tune",
        "date": "2023-11-02",
        "start": "08:00",
        "end": "09:00",
        "agenda": "会议 内容",
        "etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
        "mid": "85968252959",
        "join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
        "video_url": "",
        "mplatform": "zoom"
    }
	]
}
~~~

### 10.收藏会议

请求路径：/collect/

请求方式：post请求

请求参数：

+ 请求体: json格式

  ~~~json
  {
      "meeting": 5, # int类型，会议的id
  }
  ~~~

返回参数：

~~~json
{
    "code":200, 
    "msg": "collect successfully", 
    "collection_id": collection_id, 
    "access": access
}
~~~

### 11.取消收藏会议

请求路径： /collect/<int:pk>/

请求方式： delete请求

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，collection_id
  ~~~

返回参数：

~~~json
{
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA3NDA4LCJqdGkiOiI3NGFmOGNjNGVkZWM0YjRhOWU5NGU5NTBmMmYzNzhjOSIsInVzZXJfaWQiOjR9.8Y2xRaPgbcSXBx3YMOICN_FZC7-dajAxn88xaUR46cA"
}
~~~

### 12.查询我收藏的会议

请求路径： /collections/?page=1&size=10

请求方式:  get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [
    {
        "id": 2,
        "collection_id": null,
        "user_id": 4,
        "group_id": 1,
        "topic": "xxx",
        "sponsor": "Tom_zc",
        "group_name": "A-Tune",
        "date": "2023-11-02",
        "start": "08:00",
        "end": "09:00",
        "agenda": "会议 内容",
        "etherpad": "https://etherpad.xxx.org/p/A-Tune-meetings",
        "mid": "85968252959",
        "join_url": "https://us06web.zoom.us/j/x?pwd=x.1",
        "video_url": "",
        "mplatform": "zoom"
    }
	]
}
~~~

### 13.查询会议的参与者（机机接口）

请求路径：/participants/<int:mid>/

请求方式:  get请求

请求参数：

+ 路径参数

  ~~~json
  mid: int类型，会议的mid
  ~~~

返回参数：

~~~json
{ 
    "total_records": total_records, 
    "participants": participants
}
~~~

### 14.官网SIG组的会议数据

请求路径：/sigmeetingsdata/<str:gn>/

请求方式:  get请求

请求参数：

- 路径参数

  ```json
  gn:str， group_name
  ```

返回参数：

~~~
{ 
	"total": 50,
	"page": 2,
	"size": 10,
	"data": [
        {
            "date": "2023-11-21",
            "timeData"： [
            	{
            		'id': 1,
                    'group_name': "A-ops",
                    'startTime': "08:00",
                    'endTime': "10:00",
                    'duration_time': "08:00-10:00",
                    'name': "topic",
                    'creator': "Tom_zc",
                    'detail': "xxxxxx",
                    'join_url': "https://baidu.com",
                    'meeting_id': "21312312312",
                    'etherpad': "https://baidu.com",
                    'platform': "tencent",
                    'video_url': "https://baidu.com",
            	}
            ]
        }
	]
}
~~~

## 三.活动模块

### 1.查询审核列表(分页查询)

请求路径：/drafts/?page=1&size=10

请求方式：get请求

请求参数：

+ 查询参数

  ~~~json
  page: int类型，第几页
  size: int类型，每页的大小
  ~~~

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 2.查询待发布详情

请求路径：/draft/<int:pk>/

请求方式： get请求

请求参数：

+ 路径参数

  ~~~json
  pk： # int类型，发布活动的id
  ~~~

返回参数：

~~~json
{
	"id": 1,
	"collection_id": null,
	"title": "线下活动测试",
	"date": "2023-11-03",
	"activity_type": 1,
	"synopsis": "",
	"live_address": null,
	"address": "北京市北京市东城区锡拉胡同8号",
	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
	"longitude": "116.41025",
	"latitude": "39.91641",
	"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
	"poster": 1,
	"status": 2,
	"user": 4,
	"start": null,
	"end": null,
	"join_url": null,
	"replay_url": null,
	"register_url": "https://baidu.com"
}
~~~

### 3.发布活动申请通过

请求路径：/activitypublish/<int:pk>/

请求方式：put请求

请求参数：

+ 路径参数

  ~~~json
  pk: # int类型，活动的id
  ~~~

返回参数:

~~~json
{
	"code": 200,
	"msg": "The event has been reviewed and published",
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NTAxLCJqdGkiOiI2MWU4NTVhNTFhZTg0NGYxYmExM2Q3MmExNDJkYWQ2NCIsInVzZXJfaWQiOjR9.-98DTeu4BZ6sHa9D-CyzNqrWSYZUP1sg4h4zPNnlN50"
}
~~~

### 4.发布活动申请被驳回

请求路径： /activityreject/<int:pk>/

请求方式：put请求

请求参数：

+ 路径参数

  ~~~json
  pk: # int类型，活动的id
  ~~~

返回参数：

~~~json
{
	"code": 200,
	"msg": "Event application has been rejected",
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NTU3LCJqdGkiOiIzMjU4YzAyNTRjZTM0OWRmOTlmMmNiNjA4NzRjYmZmOSIsInVzZXJfaWQiOjR9.Xwf-jf6YSlw0_rb_yagHsJiT67Cqdhdx5aJ52nbahlc"
}
~~~

### 5.下架活动

请求路径：/activitydel/<int:pk>/

请求方式: put请求

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，活动的id
  ~~~

返回参数：

~~~jsoN
{
	"code": 204,
	"msg": "Activity deleted successfully",
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 6.创建活动并发布

请求路径：/activity/

请求方式： post请求

请求参数：

+ 请求体，json

  ~~~json
  {
  	"title": "线上",               # 活动主题，string类型，限制长度1-50
  	"date": "2023-11-03",          # 日期，大于今天
  	"activity_type": 2,            # 活动类型，1为线下活动，2为线上活动
  	"register_url": "https://space.bilibili.com/527064077",  # 报名链接，url链接检查
  	"synopsis": "线上活动",									 # 活动简介，xss攻击检查，crlf攻击检查,限制长度4096
  	
  	"address": "北京市北京市东城区锡拉胡同8号",              # 线下活动才有此字段
  	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",# 线下活动才有此字段，详细地址, xss攻击检查，crlf攻击检查，限制长度100
  	"longitude": "",										 # 线下活动才有此字段，经度, xss攻击检查，crlf攻击检查，限制长度8位
  	"latitude": "",											 # 线下活动才有此字段，维度, xss攻击检查，crlf攻击检查，限制长度8位
  	"start": "08:00",  									     # 线上活动才有此字段，开始时间
  	"end": "09:00",    										 # 线上活动才有此字段，结束时间
  	
  	
  	"poster": 1,											 # 海报，目前只有1,2,3,4									
  	"schedules": [{	                                         # 限制长度8192
  		"start": "08:00",   # 开始时间, 时间限制08:00 -> 23:59
  		"end": "09:00",     # 结束时间, 时间限制08:00 -> 23:59
  		"topic": "活动1",   # 活动子主题, xss攻击检查，crlf攻击检查
  		"speakerList": [{
  			"name": "活动2",   #嘉宾名称,xss攻击检查，crlf攻击检查
  			"title": "工程师"  #嘉宾职称,xss攻击检查，crlf攻击检查
  		}]
  	}],
  }
  ~~~

返回参数：

~~~json
{
	"code": 200,
	"msg": "The event application was published successfully",
	"access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4MTI3LCJqdGkiOiJmMDU5MmQ1MjdiNmU0MTYzYWNiNGZmNzZlZDZmNWY5YiIsInVzZXJfaWQiOjR9.txCpCZ0TzRqeeqhs6wWWyGEpyq3FIv1jtAR56oPGCoI"
}
~~~

### 7.查询活动列表(分页查询)

请求路径：/activities/?page=1&size=10&search=title

请求方式：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  search: 模糊查询title字段
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 8.查询最近的活动列表(分页查询)

请求路径：/recentactivities/?page=1&size=10

请求方式：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 9.查询用户创建的活动列表(分页查询)

请求路径：/sponsoractivities/?page=1&size=10

请求方式：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 10.查询单个活动

请求路径：/activity/<int:pk>/

请求方式：get请求

请求参数：无

返回参数：

~~~json
{
	"id": 3,
	"collection_id": null,
	"title": "xxx",
	"date": "2023-11-03",
	"activity_type": 1,
	"synopsis": "",
	"live_address": null,
	"address": "北京市北京市东城区锡拉胡同8号",
	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
	"longitude": "116.41025",
	"latitude": "39.91641",
	"schedules": "[{\"start\": \"08:00\", \"end\": \"08:00\", \"topic\": \"xxxxxxx\", \"speakerList\": [{\"name\": \"xxxxxx\", \"title\": \"xxxxxxxx\"}]}]",
	"poster": 4,
	"status": 3,
	"user": 4,
	"start": null,
	"end": null,
	"join_url": null,
	"replay_url": null,
	"register_url": "https://baidu.com"
}
~~~

### 11.修改某个活动

请求路径：/activityupdate/<int:pk>/

请求方式：put请求

请求参数：

+ 路径参数

  ~~~json
  pK: int类型，活动的id
  ~~~

+ 请求体，json

  ~~~json
  {
      "schedules": xxxx
  }
  ~~~

返回参数：

~~~json
{
    "access": "xxxxxx"    
}
~~~

### 12.创建活动草案

请求路径：/activitydraft/

请求方式： put请求

请求参数：

+ 请求体，json格式

  ~~~json
  {
  	"title": "线上",               # 活动主题，string类型，限制长度1-50
  	"date": "2023-11-03",          # 日期，大于今天
  	"activity_type": 2,            # 活动类型，1为线下活动，2为线上活动
  	"register_url": "https://space.bilibili.com/527064077",  # 报名链接，url链接检查
  	"synopsis": "线上活动",									 # 活动简介，xss攻击检查，crlf攻击检查,限制长度4096
  	
  	"address": "北京市北京市东城区锡拉胡同8号",              # 线下活动才有此字段
  	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",# 线下活动才有此字段，详细地址, xss攻击检查，crlf攻击检查，限制长度100
  	"longitude": "",										 # 线下活动才有此字段，经度, xss攻击检查，crlf攻击检查，限制长度8位
  	"latitude": "",											 # 线下活动才有此字段，维度, xss攻击检查，crlf攻击检查，限制长度8位
  	"start": "08:00",  									     # 线上活动才有此字段，开始时间
  	"end": "09:00"     										 # 线上活动才有此字段，结束时间
  	
  	
  	"poster": 1,											 # 海报，目前只有1,2,3,4									
  	"schedules": [{	                                         # 限制长度8192
  		"start": "08:00",   # 开始时间, 时间限制08:00 -> 23:59
  		"end": "09:00",     # 结束时间, 时间限制08:00 -> 23:59
  		"topic": "活动1",   # 活动子主题, xss攻击检查，crlf攻击检查
  		"speakerList": [{
  			"name": "活动2",   #嘉宾名称,xss攻击检查，crlf攻击检查
  			"title": "工程师"  #嘉宾职称,xss攻击检查，crlf攻击检查
  		}]
  	}],
  }
  ~~~

返回参数：

~~~json
{
    "code": 200, 
    "msg": "Activity draft created successfully", 
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 13.查看活动发起人的活动草案列表(分页查询)

请求路径： /activitiesdraft/?page=1&size=10

请求方式：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 14.查看单个活动草案

请求路径：/sponsoractivitydraft/<int:pk>/

请求方式： get请求

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，活动草案的id
  ~~~

返回参数：

~~~jsono
{
	"id": 3,
	"collection_id": null,
	"title": "xxx",
	"date": "2023-11-03",
	"activity_type": 1,
	"synopsis": "",
	"live_address": null,
	"address": "北京市北京市东城区锡拉胡同8号",
	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
	"longitude": "116.41025",
	"latitude": "39.91641",
	"schedules": "[{\"start\": \"08:00\", \"end\": \"08:00\", \"topic\": \"xxxxxxx\", \"speakerList\": [{\"name\": \"xxxxxx\", \"title\": \"xxxxxxxx\"}]}]",
	"poster": 4,
	"status": 3,
	"user": 4,
	"start": null,
	"end": null,
	"join_url": null,
	"replay_url": null,
	"register_url": "https://baidu.com"
}
~~~

### 15.删除单个活动草案

请求路径：/sponsoractivitydraft/<int:pk>/

请求方式：delete请求

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，活动草案的id
  ~~~

返回参数：

~~~json
{
    "code":200,
    "msg": "success",
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 16.修改活动草案

请求路径：/draftupdate/<int:pk>/

请求方式：put请求

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，活动的id
  ~~~

+ 请求体, json格式

  ~~~json
  {
  	"title": "线上",               # 活动主题，string类型，限制长度1-50
  	"date": "2023-11-03",          # 日期，大于今天
  	"activity_type": 2,            # 活动类型，1为线下活动，2为线上活动
  	"register_url": "https://space.bilibili.com/527064077",  # 报名链接，url链接检查
  	"synopsis": "线上活动",									 # 活动简介，xss攻击检查，crlf攻击检查,限制长度4096
  	
  	"address": "北京市北京市东城区锡拉胡同8号",              # 线下活动才有此字段
  	"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",# 线下活动才有此字段，详细地址, xss攻击检查，crlf攻击检查，限制长度100
  	"longitude": "",										 # 线下活动才有此字段，经度, xss攻击检查，crlf攻击检查，限制长度8位
  	"latitude": "",											 # 线下活动才有此字段，维度, xss攻击检查，crlf攻击检查，限制长度8位
  	"start": "08:00",  									     # 线上活动才有此字段，开始时间
  	"end": "09:00"     										 # 线上活动才有此字段，结束时间
  	
  	
  	"poster": 1,											 # 海报，目前只有1,2,3,4									
  	"schedules": [{	                                         # 限制长度8192
  		"start": "08:00",   # 开始时间, 时间限制08:00 -> 23:59
  		"end": "09:00",     # 结束时间, 时间限制08:00 -> 23:59
  		"topic": "活动1",   # 活动子主题, xss攻击检查，crlf攻击检查
  		"speakerList": [{
  			"name": "活动2",   #嘉宾名称,xss攻击检查，crlf攻击检查
  			"title": "工程师"  #嘉宾职称,xss攻击检查，crlf攻击检查
  		}]
  	}],
  }
  ~~~

返回参数：

~~~json
{
    "code": 200, 
    "msg": "Edit and save draft event", 
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 17.草案申请发布

请求路径：/draftpublish/<int:pk>/

请求方法：

请求参数：

+ 路径参数

  ~~~json
  pk: int类型，活动的id
  ~~~

返回参数：

~~~json
{
    "code": 200, 
    "msg": "Apply for a publishing event", 
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 18.查看个人发布中的活动(分页查询)

请求路径：/sponsoractivitiespublishing/?page=1&size=10

请求方法：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 19.收藏活动

请求路径：/collectactivity/

请求方法：post请求

请求参数：

+ 请求体，json格式

  ~~~json
  {
      "activity": # int类型，活动的id
  }
  ~~~

返回参数：

~~~json
{
    "code": 200, 
    "msg": "Collection activity", 
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 20.取消收藏活动

请求路径：/collectactivitydel/<int:pk>/

请求方法：delete请求

请求参数：

+ 路径参数：

  ~~~json
  pk: # int类型，活动id
  ~~~

返回参数：

~~~json
{
    "code": 200, 
    "msg": "Collection activity", 
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ0b2tlbl90eXBlIjoiYWNjZXNzIiwiZXhwIjoxNjk4OTA4NjcwLCJqdGkiOiJjNzM3NjhmMmFhN2U0ZTkwOTU0NDY3OWY3MGYzNDAwNCIsInVzZXJfaWQiOjR9.g_cM41yOmPbWzlaNoGOows2GgrlL-L46TuRh-NbgDu4"
}
~~~

### 21.查看我收藏的活动(分页查询)

请求路径：/collectactivities/?page=1&size=10

请求方法：get请求

请求参数：

- 查询参数

  ```json
  page: int类型，第几页
  size: int类型，每页的大小
  ```

返回参数：

~~~json
{
	"total": 50,
	"page": 1,
	"size": 10,
	"data": [{
		"id": 1,
		"collection_id": null,
		"title": "线下活动测试",
		"date": "2023-11-03",
		"activity_type": 1,
		"synopsis": "",
		"live_address": null,
		"address": "北京市北京市东城区锡拉胡同8号",
		"detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
		"longitude": "116.41025",
		"latitude": "39.91641",
		"schedules": "[{\"start\": \"08:00\", \"end\": \"22:00\", \"topic\": \"\\u6d3b\\u52a8111\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a822222\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": null,
		"end": null,
		"join_url": null,
		"replay_url": null,
		"register_url": "https://baidu.com"
	}, {
		"id": 2,
		"collection_id": null,
		"title": "线上",
		"date": "2023-11-03",
		"activity_type": 2,
		"synopsis": "线上活动",
		"live_address": null,
		"address": null,
		"detail_address": null,
		"longitude": null,
		"latitude": null,
		"schedules": "[{\"start\": \"08:00\", \"end\": \"09:00\", \"topic\": \"\\u6d3b\\u52a81\", \"speakerList\": [{\"name\": \"\\u6d3b\\u52a82\", \"title\": \"\\u5de5\\u7a0b\\u5e08\"}]}]",
		"poster": 1,
		"status": 2,
		"user": 4,
		"start": "08:00",
		"end": "09:00",
		"join_url": null,
		"replay_url": null,
		"register_url": "https://space.bilibili.com/527064077"
	}]
}
~~~

### 22.查看各类活动计数

请求路径：/countactivities/

请求方法：get请求

请求参数：无

返回参数：

~~~json
{
	"all_activities_count": 0,         # 全部         
	"registering_activities_count": 0, # 报名中     
	"going_activities_count": 0,	   # 进行中	 
	"completed_activities_count": 0    # 已结束   
}
~~~

### 23.查看我的各类计数

请求路径：/mycounts/

请求方法：get请求

请求参数：无

返回参数：

~~~json
{
	"collected_meetings_count": 0,      
	"collected_activities_count": 0,
	"created_meetings_count": 3,
	"published_activities_count": 1,
	"drafts_count": 0,
	"publishing_activities_count": 1
}
~~~

### 24.查看日历活动（删除）

请求路径：/activitiesdata/

请求方法：get请求

请求参数：无

返回参数：

~~~json
{
    "tableData": [
        {
            "start_date": "2023-11-03",
            "timeData": [
                {
                    "id": 3,
                    "title": "xxx",
                    "start_date": "2023-11-03",
                    "end_date": "2023-11-03",
                    "activity_type": 1,
                    "address": "北京市北京市东城区锡拉胡同8号",
                    "detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
                    "longitude": 116.41025,
                    "latitude": 39.91641,
                    "synopsis": "",
                    "sign_url": null,
                    "replay_url": null,
                    "register_url": "https://baidu.com",
                    "poster": 4,
                    "wx_code": "https://openeuler-mini-program.obs.cn-north-4.myhuaweicloud.com/openeuler/miniprogram/activity/3/wx_code.jpeg",
                    "schedules": [
                        {
                            "start": "08:00",
                            "end": "08:00",
                            "topic": "xxxxxxx",
                            "speakerList": [
                                {
                                    "name": "xxxxxx",
                                    "title": "xxxxxxxx"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]
}
~~~



## 四、官网活动

### 1.查询那些日期有数据

请求路径：/meeting_activity_date/?type=all

请求方式： get请求

请求参数：

- 路径参数

  ```json
  type: # all: 查询会议和活动; meetings:查询会议; activity：查询活动。
  ```

返回参数：

```json
{
    "code": 200,
    "msg": "success",
    "data": ["2023-11-16", "2023-11-17", "2023-11-18"]
}
```

### 2.查询某天的具体活动

请求路径：/meeting_activity_data/?date=2023-11-16&type=all

请求方式： get请求

请求参数：

- 路径参数

  ```json
  date: # 查询的某一天,时间类型： 2023-11-16
  type: # all: 查询会议和活动; meetings:查询会议; activity：查询活动。
  ```

返回参数：

```json
{
    "code": 200,
    "msg": "success",
    "data": {
    date: "2023-11-16",
    timeData: [
        // 会议
        {
            "id": 1, 
            "group_name": "xxxx", 
            "startTime": "8:00",
            "endTime": "11:00",
            "duration_time": "8:00-11:00",
            "name": "xxxxx",
            "creator": "creator",
            "detail": "detail",
            "join_url": "https://baidu.com",
            "meeting_id": "mid",
            "etherpad": "https://etherapd.openeuler.org",
            "platform": "zoom",
            "video_url": "https://baidu.com",
        },
        // 活动
        {
            "id": 3,
            "title": "xxx",
            "start_date": "2023-11-03",
            "end_date": "2023-11-03",
            "activity_type": 1,
            "address": "北京市北京市东城区锡拉胡同8号",
            "detail_address": "东城区灯市口利生大厦写字楼(锡拉胡同)",
            "longitude": "116.41025",
            "latitude": "39.91641",
            "synopsis": "",
            "sign_url": "",
            "replay_url": null,
            "register_url": "https://baidu.com",
            "poster": 4,
            "wx_code": "",
            "schedules": "[{\"start\": \"08:00\", \"end\": \"08:00\", \"topic\": \"xxxxxxx\", \"speakerList\": [{\"name\": \"xxxxxx\", \"title\": \"xxxxxxxx\"}]}]"
		}]
	}
}
```



## 五.功能性

1.心跳检查

请求路径：/ping/

请求方式： get请求

请求参数: 无

返回参数：

~~~json
{
    "code": 200,
    "msg": "the status is ok"
}
~~~



